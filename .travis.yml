---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="centos" tag="7"
    - image="fedora" tag="31"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack: "BOOEFdVEk/G4kN9/dpZXUshge1b5cfrMB282nMazrkcZxfSB+4hYhQnt8hM07IEuprUyE9L0qMDur8l/N1ZUZEYYDtQWsGxj/EeIJOJCC4MkEPWdLjIVv7dxLxlvMpNknasKJNjHqKEwapgc2JdIWX31QFZhwv+MHd68S911TqMLkl6OrlVwkEVx5X949FrDmPFoh0crJQAHPZ/R+QFD87SeMqlUUFeo2gsVrdY92cIAHq2Wz6iyiD0/ayEJO4/erkxFVQjJKkEkFtg6IkDFKFiDDspxTNLZfTbVLzGRuGJy1PCYMSL16HoY0EkPCWTpoWCEO59me4A7TCbt58egQiht1X1k+gBl8ECu7FiJucHKmzNU3jEmRfYZfDGY8XdOIcQtFJhZ3TIeVoPO0y+NWaX03jzkSpTX+4ow5ZySisXnDhEGp84bNmCAMvDSOMCUSk4ap5FTEnMT+tXVrdP0KwPInrwqZobf7k4hw6yKHbGC1O5UiB7nf/M7JJ3MQuA5wcz0AEyfIBtegOm4jfjRFCoJxEb7horknhrRp3Kpaiu+JJPsFPisxJ24G6Myw3xq3mRLMwpF+uRtR5lyvhq/4qDkvZ5r3FdUkArmHir3melhtjwOEW1SNaNFc4S1QkuWEq/uuxzTr9hLOKSqVarANbUI7W1Zbf/4P9D49vpykhM="
  email: false
