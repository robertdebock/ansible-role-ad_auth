---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="centos" tag="7"
    - image="fedora" tag="31"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack: "ml0ccCSsrDbH+8iiI7gnwRYchaKIPIBfi3C2DT6NOh4bWaziWXmC0qVjSk7Sb1xaxXeu9uXKLFXuy1q+GFbYqwWngSnqJ/gUgKw7njHDEX6ELRVetg5cXnalFAi/ufJ7DPgN4laS5QR4Ch3nbEi4V2R58aeVCDZsDc2NWEJlF5xZs+mXHUe2sDp4e3wPKBumNysdu43I14SzrXvup8idB8kHIQZCAisOU/+ktjmA5SzjO1xYo3I+7wac5vFqFcmzCjMzfU4OnfhcHf7BqcG59xENyd3aBqNk3zZprezYHmWqiRw/Zw29RDtiwfSeYl3tqgLypQXD7XH7e1LFrvgp20al5k7cRrYVb700MOHyFkCN4eVVv8pGqTAlnfsL/4JPFH/o7g4WUsvsVG4mWG2Cqv3/+nHjrrrVbZh3zj+/HCzRDsxVYjVXT0Fwa5BAoayF9NUYDWUFmiKKjAGVM9upi945dbNPCIBaCGaKvZUhCVlK5/QVnk75zs6RLukU7uyInqUw6c8yQzoNZaEBur7Fj77bdUg0+s3Vu8SUntoFAtcn5agkK3X5h75Yfry4jjNSRChiqgKIxeJFCQA4X6EygA/4XaoHwdJ8YS1gKluuXPbFeZvi48qp0PG5bZKMNiHDLZ72t21Ai7CHT+fBQTbJzhypaspMH51AJjDN0Bfq/pk="
  email: false
