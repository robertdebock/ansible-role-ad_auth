---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="centos" tag="7"
    - image="fedora" tag="31"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack:
    secure: HOmreOCLlqPFI7NZzsUfVzVQqZVaRiTclpdESg9Fo85JRx2uUS0NTsTU1bRelsE3qI1mfPMp6wVoo1+HO8GBnRNgbj/8gXwGvjmgffTyCqXnoFcEn/Wgsy1U/yHKxv7o6qz7WgLHgs2cPkpjJpvJd7dcEi2D6oyUWJMRhQY167dEH1EzPMtWTdPscRzTUcrC+VdESJTFfDhIPgyISdBlzQbo86Dwl8Yw0t486GYYHvkNi8fpq6ZiTIW0URvHEz5A/LWdiWLb8olw6cTldTj7kfB2gC+grvQD614nXVMNL6nML+vLebaL6aonJISbpmzxza8m/4MimGTZCxPj9VDI3IyWPXWNYAhT7C5VFjp1V4TgnxmVZoFzN3JKy5HJ2IMtuznBbZ7z9qz2lNQsmf1v5u8jNhejKX2Fw7saUuv4Bdb3CR5l3DWcjUeJIJHA6SUlICmRRvOFpB9f1YYeVyqgLyMd7vW+iO9kROcubFxXndGd50z8QLgfLc2FmA/UyLj1V5P8fCcl28GfYed0oUbMJFct/eMOoQ1staVgZf4ZeYQzBapyyMc+phzBVcNlhlPhIU/oRongUr+eYi5xmjwTBbG9oJC4WWxsYqR11fUT8hkjgsIJfqAkZzeZCbPF1EvGQajRI1OwoM8yUuG+Dl4yrSJptNRF9wsoRX8qrWMFBJU=
  email: false
